<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>For Someone Special üíô</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: 'Inter', sans-serif;
      height: 100vh;
      background: linear-gradient(135deg, #bfdbfe, #dbeafe);
    }

    #app {
      position: relative;
      width: 100%;
      height: 100%;
    }

    #content {
      position: relative;
      z-index: 10;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .step {
      position: absolute;
      width: 100%;
      max-width: 800px;
      padding: 40px;
      background: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      text-align: center;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
      pointer-events: none;
    }

    .step.active {
      opacity: 1;
      transform: translateY(0);
      pointer-events: all;
    }

    .btn {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      color: white;
      padding: 12px 24px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 20px;
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
      transition: all 0.3s ease;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
    }

    .btn.back-btn {
      background: linear-gradient(135deg, #6b7280, #374151);
      margin-top: 10px;
    }

    .text-gradient {
      background: linear-gradient(135deg, #3b82f6, #2563eb, #60a5fa);
      -webkit-background-clip: text;
      color: transparent;
    }

    .heart-beat {
      animation: heartbeat 1.5s ease-in-out infinite;
    }

    @keyframes heartbeat {
      0%, 100% { transform: scale(1); }
      25%, 75% { transform: scale(1.1); }
      50% { transform: scale(1); }
    }

    .emoji {
      font-size: 3rem;
      margin-bottom: 20px;
    }

    .reason-card {
      background: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s;
    }

    .reason-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }

    #progress-container {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      max-width: 400px;
      height: 6px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 3px;
      z-index: 100;
    }

    #progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #3b82f6, #2563eb);
      border-radius: 3px;
      transition: width 0.5s ease;
    }

    #canvas-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }
  </style>
</head>

<body>
  <div id="app">
    <div id="canvas-container"></div>
    <div id="progress-container"><div id="progress-bar"></div></div>

    <div id="content">
      <!-- Step 1 -->
      <div class="step active" id="step1">
        <div class="emoji heart-beat">üíô</div>
        <h1 class="text-4xl font-bold text-gradient mb-6">Happy Birthday Love!</h1>
        <p class="text-xl text-gray-700 mb-8">I made something special for you...</p>
        <button class="btn" id="start-btn">Let's Begin</button>
      </div>

      <!-- Step 2 -->
      <div class="step" id="step2">
        <div class="emoji">üéâ</div>
        <h2 class="text-4xl font-bold text-gradient mb-6">Happy Birthday!</h2>
        <p class="text-lg text-gray-700 mb-6">HEHEHEHEH:)</p>
        <button class="btn" id="next-btn-2">What makes you special?</button>
        <button class="btn back-btn" id="back-btn-2">Back</button>
      </div>

      <!-- Step 3 -->
      <div class="step" id="step3">
        <h2 class="text-4xl font-bold text-gradient mb-8">mwamwamwa</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
          <div class="reason-card">
            <div class="emoji">‚ú®</div>
            <h3 class="text-xl font-bold text-blue-600">Naliligo ka sa perfume dahil hindi ka naliligo </h3>
            <p class="text-gray-700">bleh</p>
          </div>
          <div class="reason-card">
            <div class="emoji">üòä</div>
            <h3 class="text-xl font-bold text-blue-600">Ang hilig mo sa red, endorser ka ba ng Malboro?</h3>
            <p class="text-gray-700">Malboro lights</p>
          </div>
          <div class="reason-card">
            <div class="emoji">üí™</div>
            <h3 class="text-xl font-bold text-blue-600">Bakit hindi mo'ko binili siomai? </h3>
            <p class="text-gray-700">Sino ba kabit mo???????????????</p>
          </div>
        </div>
        <button class="btn" id="next-btn-3">Almost there</button>
        <button class="btn back-btn" id="back-btn-3">Back</button>
      </div>

      <!-- Step 4 -->
      <div class="step" id="step4">
        <div class="emoji">üåü</div>
        <h2 class="text-4xl font-bold text-gradient mb-6">Almost There</h2>
        <button class="btn" id="next-btn-4">Next</button>
        <button class="btn back-btn" id="back-btn-4">Back</button>
      </div>

      <!-- Step 5 -->
      <div class="step" id="step5">
        <div class="emoji heart-beat">‚è≥</div>
        <h2 class="text-4xl font-bold text-gradient mb-6">Countdown</h2>
        <p class="text-lg text-gray-700 mb-6">iloveyousomuchlovelovemwamwaamwaa</p>
        <div class="text-6xl font-extrabold text-blue-500 mb-6" id="countdown-timer">5</div>
        <button class="btn" id="next-btn-5" style="display: none;" disabled>Celebrate!</button>
        <button class="btn back-btn" id="back-btn-5">Back</button>
      </div>

      <!-- Step 6 -->
      <div class="step" id="step6">
        <h2 class="text-4xl font-bold text-gradient mb-6">Let's Celebrate!</h2>
        <p class="text-lg text-gray-700 mb-6">üéä Confetti and sweet memories for you!</p>
        <div id="image-gallery" class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-8"></div>
        <button class="btn" id="try-again-btn">Try Again</button>
      </div>
    </div>
  </div>

  <!-- Birthday music audio element -->
  <audio id="birthday-music" src="music/HBD.mp3" preload="auto"></audio>

  <script>
    const steps = document.querySelectorAll('.step');
    const progressBar = document.getElementById('progress-bar');
    let currentStep = 0;
    const celebrateButton = document.getElementById('next-btn-5');
    const countdownElement = document.getElementById('countdown-timer');

    const showStep = index => {
      steps.forEach((step, i) => step.classList.toggle('active', i === index));
      currentStep = index;
      progressBar.style.width = `${((currentStep + 1) / steps.length) * 100}%`;
      celebrateButton.style.display = index === 4 ? 'inline-block' : 'none';
    };

    document.getElementById('start-btn').onclick = () => showStep(1);
    document.getElementById('next-btn-2').onclick = () => showStep(2);
    document.getElementById('back-btn-2').onclick = () => showStep(0);
    document.getElementById('next-btn-3').onclick = () => showStep(3);
    document.getElementById('back-btn-3').onclick = () => showStep(1);
    document.getElementById('next-btn-4').onclick = () => {
      showStep(4);
      startCountdown();
    };
    document.getElementById('back-btn-4').onclick = () => showStep(2);
    document.getElementById('back-btn-5').onclick = () => showStep(3);
    document.getElementById('try-again-btn').onclick = () => showStep(0);

    const startCountdown = () => {
      let count = 5;
      countdownElement.textContent = count;
      const interval = setInterval(() => {
        count--;
        countdownElement.textContent = count > 0 ? count : 'üéâ';
        if (count <= 0) {
          clearInterval(interval);
          setTimeout(() => {
            showStep(5);
            celebration();
          }, 1000);
        }
      }, 1000);
    };

    const celebration = () => {
      confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });

      const gallery = document.getElementById('image-gallery');
      gallery.innerHTML = '';

      // Local image paths - make sure these files exist!
      const images = [
        'images/1.jpg',
        'images/2.jpg',
        'images/3.jpeg'
      ];

      images.forEach(src => {
        const img = document.createElement('img');
        img.src = src;
        img.alt = 'Memory';
        img.className = 'rounded-lg shadow-lg w-full object-cover h-48 opacity-0 transition-opacity duration-700';
        gallery.appendChild(img);
        requestAnimationFrame(() => img.style.opacity = '1');
      });

      popSound.play();
      balloonSound.play();

      const music = document.getElementById('birthday-music');
      music.currentTime = 0;
      music.play();
    };

    const popSound = new Audio('https://freesound.org/data/previews/341/341695_6244859-lq.mp3');
    const balloonSound = new Audio('https://freesound.org/data/previews/522/522958_9303705-lq.mp3');

    const container = document.getElementById('canvas-container');
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    container.appendChild(renderer.domElement);

    const geometry = new THREE.BoxGeometry(2, 2, 2);
    const materials = [
      new THREE.MeshStandardMaterial({ color: 0x3b82f6 }),
      new THREE.MeshStandardMaterial({ color: 0x2563eb }),
      new THREE.MeshStandardMaterial({ color: 0x60a5fa }),
    ];

    const cubes = materials.map((mat, i) => {
      const cube = new THREE.Mesh(geometry, mat);
      cube.position.set((i - 1) * 4, 0, -10);
      scene.add(cube);
      return cube;
    });

    const light = new THREE.PointLight(0xffffff, 1.2);
    light.position.set(0, 10, 10);
    scene.add(light);
    camera.position.z = 5;

    const animate = () => {
      requestAnimationFrame(animate);
      cubes.forEach((cube, i) => {
        const speed = 0.01 + i * 0.005;
        cube.rotation.x += speed;
        cube.rotation.y += speed;
      });
      renderer.render(scene, camera);
    };
    animate();

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>
</html>
